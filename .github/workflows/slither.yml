permissions:
  contents: read
name: 'Security Checks'
on:
  pull_request:
  push:
    branches:
      - main
      - add-slither
  workflow_dispatch:

jobs:
  slither:
    uses: vechain/github-actions/.github/workflows/slither.yaml@57aaf426374fa4d13d91d6039c1cc063a59bbf3c
    with:
      solc-version: '0.8.18'
      target: 'vechain-sdk-js/packages/solo-setup/contracts/'
      fail-on: 'none'
      cache: 'npm'
      compile-command: 'yarn contracts:compile'
      ignore-compile: true
      slither-args: |
        --solc-remaps '@openzeppelin/contracts/=node_modules/@openzeppelin/contracts/ @openzeppelin/contracts-upgradeable/=node_modules/@openzeppelin/contracts-upgradeable/'
        --filter-paths '(openzeppelin|mocks|interfaces|deprecated|templates)'
        --exclude-informational
        --exclude-optimization
        --checklist
