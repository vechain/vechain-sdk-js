permissions:
  contents: read
name: 'Security Checks'
on:
  pull_request:
  push:
    branches:
      - main
      - add-slither
  workflow_dispatch:

jobs:
  scorecard:
    uses: vechain/github-actions/.github/workflows/scorecard.yaml@19d21c31f683f524c302fa9f9eacf81fd68002e8
    secrets:
      app-id: ${{ secrets.SCORECARD_APPID }}
      private-key: ${{ secrets.SCORECARD_PRIVATEKEY }}
    with:
      default-branch: develop
 
  slither:
    uses: vechain/github-actions/.github/workflows/slither.yaml@57aaf426374fa4d13d91d6039c1cc063a59bbf3c
    with:
      solc-version: '0.8.18'
      target: 'vechain-sdk-js/packages/solo-setup/contracts/'
      fail-on: 'none'
      cache: 'npm'
      compile-command: 'yarn contracts:compile'
      ignore-compile: true
      slither-args: |
        --solc-remaps '@openzeppelin/contracts/=node_modules/@openzeppelin/contracts/ @openzeppelin/contracts-upgradeable/=node_modules/@openzeppelin/contracts-upgradeable/'
        --filter-paths '(openzeppelin|mocks|interfaces|deprecated|templates)'
        --exclude-informational
        --exclude-optimization
        --checklist
